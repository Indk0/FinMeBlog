{% extends "base.html" %}

{% block content %}
<h2>Your Profile</h2>

<!-- Section for Published Posts -->
<h3>Your Published Posts:</h3>
<ul>
    {% for post in posts %}
        {% if post.status == 1 %}  <!-- Check if the post is published -->
        <li>
            {{ post.title }} - {{ post.created_on }}
            <!-- Optional: Add an Edit button for published posts -->
            <a href="{% url 'edit_post' post.id %}" class="btn btn-sm btn-primary">Edit</a>
        </li>
        {% endif %}
    {% endfor %}
</ul>

<!-- Section for Draft Posts -->
<h3>Your Draft Posts:</h3>
<ul>
    {% for post in posts %}
        {% if post.status == 0 %}  <!-- Check if the post is a draft -->
        <li>
            {{ post.title }} - {{ post.created_on }}
            <!-- Add Edit and Publish buttons for draft posts -->
            <a href="{% url 'edit_post' post.id %}" class="btn btn-sm btn-primary">Edit</a>
            <a href="{% url 'publish_post' post.id %}" class="btn btn-sm btn-success">Publish</a>
        </li>
        {% endif %}
    {% endfor %}
</ul>

<!-- Section for Comments -->
<h3>Your Comments:</h3>
<ul>
    {% for comment in comments %}
        <li>
            {{ comment.body }} on {{ comment.post.get_absolute_url }} - {{ comment.post.title }}
            {{ comment.created_on }}
            {% if not comment.approved %}
                <span class="text-danger">(Waiting for approval from admin)</span>
            {% endif %}
            <a href="{% url 'edit_comment' comment.id %}" class="btn btn-sm btn-primary">Edit</a>
        </li>
    {% endfor %}
</ul>

<!-- Section for Categories -->
<h3>Your Categories:</h3>
<ul>
    {% for category in categories %}
    <li>
        {{ category.name }}
        {% if category.approved %}
        <span style="color: green;">(Approved)</span>
        {% else %}
        <span style="color: red;">(Pending Approval)</span>
        {% endif %}
    </li>
    {% empty %}
    <li>You have not created any categories.</li>
    {% endfor %}
</ul>
<a href="{% url 'create_category' %}" class="btn btn-primary">Add Category</a>
{% endblock %}

